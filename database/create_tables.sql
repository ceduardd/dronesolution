-- CREATE ALL TABLES OF DRONESOLUTION SCHEME

CREATE TABLE users(
  dni VARCHAR2(10) NOT NULL,
  fullname VARCHAR2(80) NOT NULL,
  email VARCHAR2(50) NOT NULL UNIQUE,
  password VARCHAR2(200) NOT NULL,
  phone VARCHAR2(10) UNIQUE,
  home_address VARCHAR2(100)
);

CREATE TABLE events(
  id NUMBER(4,0) GENERATED BY DEFAULT AS IDENTITY,
  user_dni VARCHAR2(10) NOT NULL,
  name VARCHAR2(80) NOT NULL,
  description VARCHAR2(250) NOT NULL,
  date_start TIMESTAMP NOT NULL,
  duration VARCHAR2(5) NOT NULL,
  num_attendees NUMBER(7,0) NOT NULL,
  capacity_allowed NUMBER(4,4) NOT NULL,
  type VARCHAR2(30),
  state VARCHAR2(20) DEFAULT 'ACTIVE'
);

CREATE TABLE places(
  id NUMBER(4,0) GENERATED BY DEFAULT AS IDENTITY,
  event_id NUMBER(4,0) NOT NULL,
  name VARCHAR2(50) NOT NULL,
  address VARCHAR2(100) NOT NULL,
  type VARCHAR2(30) NOT NULL,
  capacity_max NUMBER(7,0) NOT NULL
);

CREATE TABLE alarms(
  user_dni VARCHAR2(10) NOT NULL,
  type VARCHAR2(20) NOT NULL,
  description VARCHAR2(50) NOT NULL,
  issued_at TIMESTAMP(2) NOT NULL
);

CREATE TABLE unsubscribed_events(
	event_id NUMBER(4,0) NOT NULL,
	reason VARCHAR2(100) NOT NULL
);

CREATE TABLE plans(
  id NUMBER(4,0) GENERATED BY DEFAULT AS IDENTITY,
  name VARCHAR2(20) NOT NULL,
  price NUMBER(5,0) NOT NULL
);

CREATE TABLE agreements(
  id NUMBER(4,0) GENERATED BY DEFAULT AS IDENTITY,
  date_issue DATE NOT NULL,
  user_dni VARCHAR2(10) NOT NULL,
  plan_id NUMBER(4,0) NOT NULL,
  event_id NUMBER(4,0) NOT NULL
);

CREATE TABLE organizations(
  name_org VARCHAR2(100) NOT NULL,
  phone_org VARCHAR2(10) NOT NULL,
  email_org VARCHAR2(50) NOT NULL,
  address_org VARCHAR2(100) NOT NULL,
  user_dni VARCHAR2(10) NOT NULL
);

CREATE TABLE pilots(
  dni VARCHAR2(10) NOT NULL,
  fullname VARCHAR2(80) NOT NULL,
  email VARCHAR2(50) NOT NULL UNIQUE,
  phone VARCHAR2(10) UNIQUE,
  home_address VARCHAR2(100),
  experience VARCHAR2(300) NOT NULL,
  path_img VARCHAR2(100)
);

CREATE TABLE drones(
  id NUMBER(4,0) GENERATED BY DEFAULT AS IDENTITY,
  brand VARCHAR2(100) NOT NULL,
  description VARCHAR2(200) NOT NULL,
  pilot_dni VARCHAR2(10) NOT NULL,
  path_img VARCHAR2(100)
);

